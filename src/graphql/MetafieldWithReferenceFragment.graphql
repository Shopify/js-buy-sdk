fragment MediaFragment on MediaImage {
    image {
        originalSrc
        url
    }
}

fragment VideoFragment on Video {
    previewImage {
        originalSrc
        url
    }
    sources {
        format
        url
        height
        width
    }
}

fragment MetaobjectFragment on Metaobject {
    fields {
        key
        type
        value
        reference {
            ...MediaFragment
            ...VideoFragment
        }
    }
}

fragment MetafieldWithReferenceFragment on Metafield {
    key
    namespace
    type
    value
    reference {
        ...MediaFragment
        ...VideoFragment
        ...MetaobjectFragment
    }
}
